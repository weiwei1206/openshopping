(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb55bb6c"],{"13bd":function(t,e,r){"use strict";var n=r("5e2f"),a=r.n(n);a.a},2778:function(t,e,r){"use strict";var n=r("0261");e["a"]=new n["a"]({})},"2f94":function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"c",(function(){return d})),r.d(e,"b",(function(){return i})),r.d(e,"e",(function(){return o})),r.d(e,"a",(function(){return u}));var n=r("e20a");function a(){return Object(n["a"])({url:"/user/addressList",method:"get"})}function d(){return Object(n["a"])({url:"/user/addressDefault",method:"get"})}function i(t){return Object(n["a"])({url:"/user/addressById/"+t,method:"get"})}function o(t){return Object(n["a"])({url:"/user/saveAddress",method:"post",params:{data:t}})}function u(t){return Object(n["a"])({url:"/user/delAddress",method:"post",data:t})}},"5e2f":function(t,e,r){},a193:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order"},[r("headerNav",{attrs:{title:"确认订单"}}),r("van-cell",{staticClass:"contact-card",attrs:{center:"",border:!1,"is-link":"",to:"/user/address?id="+t.default_addr.id}},["add"===t.type?[r("strong",[t._v("选择地址")])]:[r("strong",[t._v(t._s(t.default_addr.name)+" "+t._s(t.default_addr.tel))]),r("div",[t._v(t._s(t.default_addr.addressDetail)+" ")])]],2),r("div",{staticStyle:{height:"15px"}}),t._l(t.products,(function(t,e){return r("div",{key:e,staticClass:"card"},[r("product-card",{attrs:{product:t}})],1)})),r("div",{staticStyle:{height:"15px"}}),r("div",{staticStyle:{height:"15px"}}),r("div",{staticStyle:{height:"15px"}}),r("van-cell-group",{staticClass:"total"},[r("van-cell",{attrs:{title:"商品总额",value:t.formatPrice(t.totalPrice)}}),r("van-cell",{attrs:{title:"件数",value:t.products.length}}),r("van-cell",{staticStyle:{"font-weight":"700"},attrs:{title:"实付金额",value:t.formatPrice(t.totalPrice)}})],1),r("div",{staticStyle:{height:"50px"}}),r("van-submit-bar",{attrs:{price:t.totalPrice,"button-text":"提交订单",label:"实付金额："},on:{submit:t.onSubmit}})],2)},a=[],d=(r("6d57"),r("2f94")),i=r("f8b7"),o=r("2778"),u={name:"order",data:function(){return{type:"add1",default_addr:{},products:[],order_info:{goods_price:0}}},computed:{totalPrice:function(){var t=0;return this.products.forEach((function(e){t+=e.price*e.quantity})),t}},watch:{$route:function(t){this.onLoadGoods(),this.initPrice()}},created:function(){this.onLoadGoods(),this.onLoadDefaultAddr()},methods:{onLoadDefaultAddr:function(){var t=this;Object(d["c"])().then((function(e){var r=e.data.address;t.default_addr=r}))},onLoadGoods:function(){var t=[];t=JSON.parse(this.$route.query.goods),this.products=t,this.initPrice()},initPrice:function(){var t=this;this.products.forEach((function(e){t.order_info.goods_price+=e.price*e.quantity}))},onSubmit:function(){var t=this,e=this.products;Object(i["d"])(JSON.stringify({goods:e,address_id:this.default_addr.id})).then((function(e){t.$toast("购买成功")}))},formatPrice:function(t){return(t/100).toFixed(2)}},mounted:function(){},activated:function(){var t=this;o["a"].$on("selectAddress",(function(e){var r={id:e.id,name:e.name,addressDetail:e.address};t.default_addr=r}))}},s=u,c=(r("13bd"),r("e90a")),l=Object(c["a"])(s,n,a,!1,null,null,null);e["default"]=l.exports},f8b7:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return o}));var n=r("e20a");function a(){return Object(n["a"])({url:"/myOrder",method:"get"})}function d(){return Object(n["a"])({url:"/afterSale",method:"get"})}function i(t){return Object(n["a"])({url:"/orderGoodsById",method:"get",params:{id:t}})}function o(t){return Object(n["a"])({url:"/products/submitOrder",method:"post",data:t})}}}]);
//# sourceMappingURL=chunk-cb55bb6c.8e7efae0.js.map