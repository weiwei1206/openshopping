{"version":3,"sources":["webpack:///./src/page/shipping/order.vue?f58e","webpack:///./src/page/user/address/bus.js","webpack:///./src/api/address.js","webpack:///./src/page/shipping/order.vue?b2ce","webpack:///src/page/shipping/order.vue","webpack:///./src/page/shipping/order.vue?2142","webpack:///./src/page/shipping/order.vue","webpack:///./src/api/order.js"],"names":["Vue","GetAddressList","request","url","method","GetAddressDefault","GetAddressById","id","SaveAddress","data","params","DelAddress","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","default_addr","type","_v","_s","name","tel","addressDetail","staticStyle","_l","product","i","key","formatPrice","totalPrice","products","length","on","onSubmit","staticRenderFns","order_info","goods_price","price","watch","$route","created","onLoadGoods","onLoadDefaultAddr","methods","goods","initPrice","forEach","mounted","activated","_this","component","GetMyOrder","GetOrderAfterSale","GetOrderGoodsById","SubmitOrder"],"mappings":"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","file":"js/chunk-cb55bb6c.8e7efae0.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./order.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./order.vue?vue&type=style&index=0&lang=less&\"","import Vue from 'vue';\r\nexport default new Vue({});","import request from \"@/config/request\";\r\n\r\nexport function GetAddressList() {\r\n    return request({\r\n        url: '/user/addressList',\r\n        method: 'get',\r\n    })\r\n}\r\nexport function GetAddressDefault() {\r\n    return request({\r\n        url: '/user/addressDefault',\r\n        method: 'get',\r\n    })\r\n}\r\nexport function GetAddressById(id) {\r\n    return request({\r\n        url: '/user/addressById/' + id,\r\n        method: 'get',\r\n    })\r\n}\r\nexport function SaveAddress(data) {\r\n    return request({\r\n        url: '/user/saveAddress',\r\n        method: 'post',\r\n        params: { data }\r\n    })\r\n}\r\nexport function DelAddress(id) {\r\n    return request({\r\n        url: '/user/delAddress',\r\n        method: 'post',\r\n        data: id\r\n    })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order\"},[_c('headerNav',{attrs:{\"title\":\"确认订单\"}}),_c('van-cell',{staticClass:\"contact-card\",attrs:{\"center\":\"\",\"border\":false,\"is-link\":\"\",\"to\":'/user/address?id='+_vm.default_addr.id}},[(_vm.type === 'add')?[_c('strong',[_vm._v(\"选择地址\")])]:[_c('strong',[_vm._v(_vm._s(_vm.default_addr.name)+\" \"+_vm._s(_vm.default_addr.tel))]),_c('div',[_vm._v(_vm._s(_vm.default_addr.addressDetail)+\" \")])]],2),_c('div',{staticStyle:{\"height\":\"15px\"}}),_vm._l((_vm.products),function(product,i){return _c('div',{key:i,staticClass:\"card\"},[_c('product-card',{attrs:{\"product\":product}})],1)}),_c('div',{staticStyle:{\"height\":\"15px\"}}),_c('div',{staticStyle:{\"height\":\"15px\"}}),_c('div',{staticStyle:{\"height\":\"15px\"}}),_c('van-cell-group',{staticClass:\"total\"},[_c('van-cell',{attrs:{\"title\":\"商品总额\",\"value\":_vm.formatPrice(_vm.totalPrice)}}),_c('van-cell',{attrs:{\"title\":\"件数\",\"value\":_vm.products.length}}),_c('van-cell',{staticStyle:{\"font-weight\":\"700\"},attrs:{\"title\":\"实付金额\",\"value\":_vm.formatPrice(_vm.totalPrice)}})],1),_c('div',{staticStyle:{\"height\":\"50px\"}}),_c('van-submit-bar',{attrs:{\"price\":_vm.totalPrice,\"button-text\":\"提交订单\",\"label\":\"实付金额：\"},on:{\"submit\":_vm.onSubmit}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"order\">\n     <headerNav title=\"确认订单\"/>\n     <van-cell\n      center\n      :border=\"false\"\n      class=\"contact-card\"\n      is-link\n      :to=\"'/user/address?id='+default_addr.id\"\n    >\n      <template v-if=\"type === 'add'\">\n        <strong>选择地址</strong>\n      </template>\n      <template v-else>\n        <strong>{{default_addr.name}} {{default_addr.tel}}</strong>\n        <div>{{default_addr.addressDetail}} </div>\n      </template>\n    </van-cell>\n    <div style=\"height:15px;\"></div>\n    <div class=\"card\" v-for=\"(product,i) in products\" :key=\"i\">\n      <product-card :product='product' />\n    </div>\n    <div style=\"height:15px;\"></div>\n    <!-- <van-cell-group>\n      <van-field\n        label=\"留言\"\n        type=\"textarea\"\n        placeholder=\"请输入留言\"\n        rows=\"1\"\n        autosize\n      />\n    </van-cell-group> -->\n    <div style=\"height:15px;\"></div>\n    <!-- <van-cell-group class=\"total\">\n        <van-cell title=\"优惠券\" is-link value=\"抵扣¥5.00\" />\n    </van-cell-group> -->\n    \n    <div style=\"height:15px;\"></div>\n    <van-cell-group class=\"total\">\n        <van-cell title=\"商品总额\" :value=\"formatPrice(totalPrice)\" />\n        <van-cell title=\"件数\" :value=\"products.length\" />\n        <van-cell title=\"实付金额\" :value=\"formatPrice(totalPrice)\" style=\"font-weight: 700;\" />\n    </van-cell-group>\n\n    <div style=\"height:50px;\"></div>\n    <van-submit-bar\n      :price=\"totalPrice\"\n      button-text=\"提交订单\"\n      label='实付金额：'\n      @submit=\"onSubmit\"\n    />\n\n  </div>\n</template>\n\n<script>\nimport  {GetAddressDefault} from '@/api/address'\nimport  {SubmitOrder} from '@/api/order'\nimport Bus from '@/page/user/address/bus.js'\nexport default {\n  name:\"order\",\n  data() {\n    return {\n      type: \"add1\",\n      default_addr:{},\n      products: [\n        // {\n        //   imageURL:\n        //     \"https://img10.360buyimg.com/mobilecms/s88x88_jfs/t17572/12/840082281/351445/e1828c58/5aab8dbbNedb77d88.jpg\",\n        //   title: \"良品铺子 肉肉聚汇猪肉脯 猪蹄卤 辣味小吃520g\",\n        //   desc: \"0.670kg/件，肉肉聚汇520g\",\n        //   price: \"59.80\",\n        //   quantity: 2\n        // },\n        // {\n        //   imageURL:\n        //     \"https://img10.360buyimg.com/mobilecms/s88x88_jfs/t22720/128/1410375403/319576/8dbd859f/5b5e69b3Nf4f0e9e7.jpg\",\n        //   title: \"元朗 鸡蛋卷 饼干糕点 中秋礼盒 广东特产680g\",\n        //   desc: \"1.320kg/件\",\n        //   price: \"65.80\",\n        //   quantity: 1,\n        //   gift: [\n        //     {\n        //       title: \"星巴克（Starbucks）星冰乐小熊吊饰星巴克（Starbucks）星冰乐小熊吊饰\",\n        //       quantity: 2\n        //     },\n        //     {\n        //       title: \"星巴克（Starbucks）星冰乐小熊吊饰星巴克（Starbucks）星冰乐小熊吊饰\",\n        //       quantity: 1\n        //     }\n        //   ]\n        // },\n        // {\n        //   imageURL:\n        //     \"https://img10.360buyimg.com/mobilecms/s88x88_jfs/t17572/12/840082281/351445/e1828c58/5aab8dbbNedb77d88.jpg\",\n        //   title: \"良品铺子 肉肉聚汇猪肉脯 猪蹄卤 辣味小吃520g\",\n        //   desc: \"0.670kg/件，肉肉聚汇520g\",\n        //   price: \"59.80\",\n        //   quantity: 2\n        // },\n      ],\n      order_info:{\n        goods_price:0,\n      }\n    };\n  },\n   computed: {\n    totalPrice() {\n      var price = 0.00\n        this.products.forEach(p => {\n         \n          price+=p.price*p.quantity\n\n        });\n      return price\n    },\n  },\n  watch: {\n    $route (newRoute) {\n     // let newQuery = newRoute.query.anchor // 这里就是新的query\n     this.onLoadGoods()\n     this.initPrice()\n    }\n  },\n  created(){\n    \n    this.onLoadGoods()\n    this.onLoadDefaultAddr()\n   \n  },\n  methods: {\n\n    onLoadDefaultAddr(){\n      \n      GetAddressDefault().then(Response=>{\n        let data = Response.data.address\n        this.default_addr = data\n      })\n    },\n    onLoadGoods(){\n      var goods = []\n      goods =   JSON.parse(this.$route.query.goods)\n      this.products = goods\n      this.initPrice()\n    \n    },\n    initPrice(){\n      this.products.forEach(p => {\n        this.order_info.goods_price+=p.price*p.quantity\n      });\n    },\n    onSubmit() {\n      let goods = this.products\n      SubmitOrder(JSON.stringify({goods:goods,address_id:this.default_addr.id})).then(Response=>{\n        this.$toast(\"购买成功\");\n      })\n      \n    },\n    /**\n     * 价格格式化\n     */\n    formatPrice(val) {\n      return  (val / 100).toFixed(2);\n    },\n  },\n  mounted(){\n  },\n  activated(){\n    var _this = this\n     //根据key名获取传递回来的参数，data就是map\n      Bus.$on('selectAddress', function(data){\n          //赋值给首页的附近医院数据模型\n          let addr = {\n            id:data.id,\n            name:data.name,\n            addressDetail:data.address\n          }\n        _this.default_addr = addr\n      });\n  },\n};\n</script>\n\n<style lang=\"less\">\n.order {\n  font-size: 14px;\n  background: #f7f7f7;\n  .contact-card::before {\n    content: \"\";\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 2px;\n    position: absolute;\n    background: -webkit-repeating-linear-gradient(\n      135deg,\n      #ff6c6c 0,\n      #ff6c6c 20%,\n      transparent 0,\n      transparent 25%,\n      #3283fa 0,\n      #3283fa 45%,\n      transparent 0,\n      transparent 50%\n    );\n    background: repeating-linear-gradient(\n      -45deg,\n      #ff6c6c 0,\n      #ff6c6c 20%,\n      transparent 0,\n      transparent 25%,\n      #3283fa 0,\n      #3283fa 45%,\n      transparent 0,\n      transparent 50%\n    );\n    background-size: 80px;\n  }\n  .total {\n    .van-cell__value {\n      color: red;\n    }\n  }\n  \n  .van-submit-bar__bar {\n    border-top: 1px solid #f7f7f7;\n  }\n  .additional {\n    .van-cell {\n      padding: 0 15px;\n      font-size: 12px;\n    }\n    .van-cell__title {\n      flex: 11;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n    .van-tag {\n      line-height: 12px;\n      margin-right: 5px;\n    }\n    \n    .price {\n      color: #e93b3d;\n      font-size: 10px;\n      span {\n        font-size: 16px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./order.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./order.vue?vue&type=template&id=66b79764&\"\nimport script from \"./order.vue?vue&type=script&lang=js&\"\nexport * from \"./order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from \"@/config/request\";\r\n\r\n\r\nexport function GetMyOrder() {\r\n    return request({\r\n        url: '/myOrder',\r\n        method: 'get',\r\n    })\r\n}\r\nexport function GetOrderAfterSale() {\r\n    return request({\r\n        url: '/afterSale',\r\n        method: 'get',\r\n    })\r\n}\r\nexport function GetOrderGoodsById(id) {\r\n    return request({\r\n        url: '/orderGoodsById',\r\n        method: 'get',\r\n        params: { id }\r\n    })\r\n}\r\nexport function SubmitOrder(data) {\r\n    return request({\r\n        url: '/products/submitOrder',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}"],"sourceRoot":""}