(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69e82315"],{"16b7":function(t,e,c){"use strict";var o=c("98ca"),a=c.n(o);a.a},2166:function(t,e,c){"use strict";c.d(e,"b",(function(){return a})),c.d(e,"a",(function(){return n})),c.d(e,"c",(function(){return s}));var o=c("e20a");function a(){return Object(o["a"])({url:"/products/getcart",method:"get"})}function n(t){return Object(o["a"])({url:"/products/addCart",method:"post",data:t})}function s(t){return Object(o["a"])({url:"/products/removeCart",method:"post",data:t})}},"3387f":function(t,e,c){"use strict";c.r(e);var o=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"card"},[c("headerNav",{attrs:{title:"购物车"}}),c("van-cell",{staticClass:"head"},[c("template",{slot:"default"},[c("span",{on:{click:t.editClick}},[t._v(t._s(0==t.edit_state?"编辑商品":"完成"))])]),c("template",{slot:"title"},[c("van-checkbox",{model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")])],1)],2),c("van-checkbox-group",{staticClass:"card-goods",model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},[c("div",{staticClass:"promotion-group"},t._l(t.goods,(function(e,o){return c("div",{key:o,staticClass:"card-goods__item"},[c("van-checkbox",{attrs:{name:e.id}}),c("product-card",{attrs:{product:e,iscard:!0},on:{stepperChange:t.stepperChange}},[c("template",{slot:"default"})],2)],1)})),0)]),c("div",{staticStyle:{height:"50px"}}),c("van-submit-bar",{attrs:{price:t.totalPrice,disabled:!t.checkedGoods.length,"button-text":t.submitBarText},on:{submit:t.onSubmit}},[c("template",{slot:"default"},[c("van-checkbox",{on:{change:t.checkedAllChange},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}},[t._v("全选")])],1)],2)],1)},a=[],n=(c("6d57"),c("2166")),s={components:{},created:function(){this.onLoadMainDatas()},data:function(){return{checkedAll:!1,edit_state:!1,checkedGoods:[],goods:[]}},computed:{submitBarText:function(){var t=this.checkedGoods.length;return 0==this.edit_state?"结算"+(t?"(".concat(t,")"):""):"移除"+(t?"(".concat(t,")"):"")},totalPrice:function(){var t=this,e=0;return this.checkedGoods.forEach((function(c){t.goods.forEach((function(t){t.id==c&&(e+=t.price*t.quantity)}))})),e}},methods:{onLoadMainDatas:function(){var t=this;Object(n["b"])().then((function(e){var c=e.data.goods;t.goods=c}))},onSubmit:function(){var t=this;if(0==this.edit_state){var e=[];this.checkedGoods.forEach((function(c){t.goods.forEach((function(t){t.id==c&&e.push(t)}))})),this.$router.push({path:"/order",query:{goods:JSON.stringify(e)}})}else{var c=[];this.checkedGoods.forEach((function(t){c.push(parseInt(t))})),Object(n["c"])(JSON.stringify(c)).then((function(e){var c=e.data;c&&(t.$toast("移除购物车成功"),t.onLoadMainDatas())}))}},checkedAllChange:function(t){var e=this;console.info(t),0==t?this.checkedGoods=[]:this.goods.forEach((function(t){e.checkedGoods.push(t.id)}))},editClick:function(){this.edit_state=!this.edit_state},stepperChange:function(){}}},i=s,d=(c("16b7"),c("e90a")),r=Object(d["a"])(i,o,a,!1,null,null,null);e["default"]=r.exports},"98ca":function(t,e,c){}}]);
//# sourceMappingURL=chunk-69e82315.66e52193.js.map