{"version":3,"sources":["webpack:///./src/page/cart/index.vue?4ae3","webpack:///./src/api/cart.js","webpack:///./src/page/cart/index.vue?9b43","webpack:///src/page/cart/index.vue","webpack:///./src/page/cart/index.vue?7a8e","webpack:///./src/page/cart/index.vue"],"names":["GetCart","request","url","method","AddCart","data","RemoveCart","goods_ids","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","on","editClick","_v","_s","edit_state","model","value","callback","$$v","checkedAll","expression","checkedGoods","_l","item","index","key","id","stepperChange","staticStyle","totalPrice","length","submitBarText","onSubmit","checkedAllChange","staticRenderFns","components","created","onLoadMainDatas","goods","computed","count","price","forEach","methods","submit_datas","push","g","$router","path","query","parseInt","c","console","info","val","component"],"mappings":"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","file":"js/chunk-69e82315.66e52193.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\"","import request from \"@/config/request\";\r\n\r\n\r\nexport function GetCart() {\r\n    return request({\r\n        url: '/products/getcart',\r\n        method: 'get',\r\n    })\r\n}\r\nexport function AddCart(data) {\r\n    return request({\r\n        url: '/products/addCart',\r\n        method: 'post',\r\n        data: data\r\n    })\r\n}\r\n\r\nexport function RemoveCart(goods_ids) {\r\n    return request({\r\n        url: '/products/removeCart',\r\n        method: 'post',\r\n        data: goods_ids\r\n    })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('headerNav',{attrs:{\"title\":\"购物车\"}}),_c('van-cell',{staticClass:\"head\"},[_c('template',{slot:\"default\"},[_c('span',{on:{\"click\":_vm.editClick}},[_vm._v(_vm._s(_vm.edit_state==false? '编辑商品':'完成'))])]),_c('template',{slot:\"title\"},[_c('van-checkbox',{model:{value:(_vm.checkedAll),callback:function ($$v) {_vm.checkedAll=$$v},expression:\"checkedAll\"}},[_vm._v(\"全选\")])],1)],2),_c('van-checkbox-group',{staticClass:\"card-goods\",model:{value:(_vm.checkedGoods),callback:function ($$v) {_vm.checkedGoods=$$v},expression:\"checkedGoods\"}},[_c('div',{staticClass:\"promotion-group\"},_vm._l((_vm.goods),function(item,index){return _c('div',{key:index,staticClass:\"card-goods__item\"},[_c('van-checkbox',{attrs:{\"name\":item.id}}),_c('product-card',{attrs:{\"product\":item,\"iscard\":true},on:{\"stepperChange\":_vm.stepperChange}},[_c('template',{slot:\"default\"})],2)],1)}),0)]),_c('div',{staticStyle:{\"height\":\"50px\"}}),_c('van-submit-bar',{attrs:{\"price\":_vm.totalPrice,\"disabled\":!_vm.checkedGoods.length,\"button-text\":_vm.submitBarText},on:{\"submit\":_vm.onSubmit}},[_c('template',{slot:\"default\"},[_c('van-checkbox',{on:{\"change\":_vm.checkedAllChange},model:{value:(_vm.checkedAll),callback:function ($$v) {_vm.checkedAll=$$v},expression:\"checkedAll\"}},[_vm._v(\"全选\")])],1)],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"card\">\n    <headerNav title=\"购物车\"/>\n       <van-cell  class=\"head\">\n         <template slot=\"default\" >\n          <span @click=\"editClick\">{{edit_state==false? '编辑商品':'完成'}}</span>\n        </template>\n        <template slot=\"title\">\n          <van-checkbox v-model=\"checkedAll\" >全选</van-checkbox>\n        </template>\n      </van-cell>\n        \n    <van-checkbox-group class=\"card-goods\" v-model=\"checkedGoods\">\n      \n      <div class=\"promotion-group\">\n        <div  v-for=\"(item,index) in goods\"\n          :key=\"index\" class=\"card-goods__item\"> \n          <van-checkbox :name=\"item.id\"></van-checkbox>\n\n          <product-card :product='item' :iscard='true' @stepperChange=\"stepperChange\">\n            <template slot>\n              <!-- <van-cell value=\"修改\" >\n                  <template slot=\"title\">\n                      <van-tag type=\"danger\">促销</van-tag>\n                      <span class=\"van-cell-text\" >满60元减5元</span>\n                  </template>\n              </van-cell> -->\n            </template>\n          </product-card>\n        </div>\n        </div>\n        </van-checkbox-group>\n    \n    <div style=\"height:50px;\"></div>\n    <van-submit-bar\n      :price=\"totalPrice\"\n      :disabled=\"!checkedGoods.length\"\n      :button-text=\"submitBarText\"\n      @submit=\"onSubmit\"\n    >\n    <template slot>\n      <van-checkbox v-model=\"checkedAll\" @change=\"checkedAllChange\">全选</van-checkbox>\n    </template>\n    </van-submit-bar>\n  </div>\n</template>\n\n<script>\nimport {GetCart,RemoveCart} from '@/api/cart'\nexport default {\n  components: {\n  },\n  created(){\n    this.onLoadMainDatas()\n  },\n  data() {\n    return {\n      checkedAll:false,\n      edit_state:false,\n      checkedGoods: [],\n      goods: [\n        //   {\n        //   id: '1',\n        //   title: '星巴克(Starbucks)星冰乐 轻盈香草味 咖啡饮料 281ml*6瓶礼盒装低脂减糖',\n        //   desc: '3.18kg/件',\n        //   price: '200.00',\n        //   quantity: 1,\n        //   imageURL: 'https://img.yzcdn.cn/public_files/2017/10/24/2f9a36046449dafb8608e99990b3c205.jpeg',\n        //   imageTag:'比加入时降5元',\n        // }, {\n        //   id: '2',\n        //   title: '陕西蜜梨',\n        //   desc: '约600g',\n        //   price: '690.00',\n        //   quantity: 1,\n        //   imageURL: 'https://img.yzcdn.cn/public_files/2017/10/24/f6aabd6ac5521195e01e8e89ee9fc63f.jpeg',\n        //     gift: [\n        //       {\n        //         title: \"星巴克（Starbucks）星冰乐小熊吊饰星巴克（Starbucks）星冰乐小熊吊饰\",\n        //         quantity: 2\n        //       },\n        //       {\n        //         title: \"星巴克（Starbucks）星冰乐小熊吊饰星巴克（Starbucks）星冰乐小熊吊饰\",\n        //         quantity: 1\n        //       }\n        //     ]\n        // }, {\n        //   id: '3',\n        //   title: '美国伽力果',\n        //   desc: '约680g/3个',\n        //   price: '2680.00',\n        //   quantity: 1,\n        //   imageURL: 'https://img.yzcdn.cn/public_files/2017/10/24/320454216bbe9e25c7651e1fa51b31fd.jpeg'\n        // }\n      ]\n    };\n  },\n  computed: {\n    submitBarText() {\n      const count = this.checkedGoods.length;\n      if(this.edit_state == false){\n        return '结算' + (count ? `(${count})` : '')\n      }else{\n        return '移除' + (count ? `(${count})` : '')\n      }\n      \n    },\n    totalPrice() {\n      var price = 0.00\n      this.checkedGoods.forEach(c => {\n        this.goods.forEach(g => {\n          if(g.id == c){\n            price+=g.price*g.quantity\n          }\n        });\n      });\n      return price\n    },\n  },\n  methods: {\n    onLoadMainDatas(){\n      GetCart().then(Response=>{\n        let data = Response.data.goods\n        this.goods = data\n      })\n    },\n    onSubmit() {\n      if(this.edit_state == false){\n        var submit_datas = []\n        this.checkedGoods.forEach(c => {\n          this.goods.forEach(g => {\n            if(g.id == c){\n              submit_datas.push(g)\n            }\n          });\n        });\n        this.$router.push({\n          path:'/order',\n          query :{\n            goods:JSON.stringify(submit_datas)\n          }\n        })\n      }else{\n        var goods_ids = []\n        this.checkedGoods.forEach(c => {\n          goods_ids.push(parseInt(c))\n        });\n        RemoveCart(JSON.stringify(goods_ids)).then(Response=>{\n          let data = Response.data\n          if(data){\n            this.$toast(\"移除购物车成功\");\n            this.onLoadMainDatas()\n          }\n        })\n      }\n     \n    },\n    checkedAllChange(val){\n      console.info(val)\n      if(val == false){\n        this.checkedGoods = []\n      }else{\n        this.goods.forEach(g => {\n          this.checkedGoods.push(g.id)\n        });\n      }\n    },\n    editClick(){\n      this.edit_state = !this.edit_state\n    },\n    stepperChange(){\n    },\n\n  }\n};\n</script>\n\n<style lang=\"less\">\n.card-goods {\n  font-size: 12px;\n  &__item {\n    position: relative;\n    .van-checkbox{\n      width: 20px;\n      height: 20px;\n      top: 40px;\n      left: 5px;\n      z-index: 1;\n      position: absolute;\n    }\n    .additional{\n      width: 100%;\n      padding-left: 15px;\n    box-sizing: border-box;\n    }\n  }\n}\n.head{\n      padding-left: 5px;\n  border-bottom: 1px solid #eee;\n}\n.card{\n  background: #f7f7f7;\n  .van-submit-bar__bar {\n      border-top: 1px solid #f7f7f7;\n      .van-checkbox{\n        padding-left: 5px;\n      }\n  }\n  .promotion{\n      .van-tag {\n          line-height: 12px;\n          margin-right: 5px;\n      }\n      .van-cell__title{\n\n      flex: 4;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      }\n    }\n    .promotion-group{\n      margin-top: 10px;\n      box-shadow: 5px 5px 5px #e5e5e5;\n    }\n}\n\n    \n</style>","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0d55b7ca&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}